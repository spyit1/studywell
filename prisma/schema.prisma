generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

/**
 * ã‚¿ã‚¹ã‚¯æœ¬ä½“ã€‚
 * é‡è¦åº¦ã¯ 1ã€œ5 æƒ³å®šã€‚æœªå®Œäº†ã®ã¿ã‚’ä¸¦ã¹æ›¿ãˆã¦ãƒˆãƒƒãƒ—3ãªã©ã§ä½¿ç”¨ã€‚
 */
model Task {
  id             String          @id @default(cuid())
  title          String
  description    String?
  dueDate        DateTime?
  estimateMin    Int?
  importance     Int             @default(3) // 1-5
  isDone         Boolean         @default(false)
  createdAt      DateTime        @default(now())
  updatedAt      DateTime        @updatedAt

  priorityScores PriorityScore[]

  @@index([isDone, importance, dueDate])
  @@index([createdAt])
}

/**
 * ä½“èª¿ï¼ˆæ—¥ã«1å›ï¼‰ã€‚
 * date ã¯ JST ã® 00:00 å›ºå®šã§ä¿å­˜ã™ã‚‹æƒ³å®šï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã§æ­£è¦åŒ–ï¼‰ã€‚
 * 1ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ³å®šã®ãŸã‚æ—¥ä»˜ã§ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ã€‚
 */
model DailyHealth {
  id        String   @id @default(cuid())
  date      DateTime @unique
  condition Int                   // ä¾‹: è‰¯ã„=3, æ™®é€š=2, æ‚ªã„=1ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã§ãƒãƒƒãƒ”ãƒ³ã‚°ï¼‰
  note      String?
  createdAt DateTime @default(now())

  @@index([date])
  @@index([createdAt])
}

/**
 * æ°—åˆ†ï¼ˆã‚¢ãƒ—ãƒªèµ·å‹•ã®ãŸã³ï¼‰ã€‚
 * at ã¯è¨˜éŒ²æ™‚åˆ»ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ now() ã‚’ä»˜ä¸ã—ã¦ API å´ã®è² æ‹…ã‚’è»½æ¸›ã€‚
 */
model MoodLog {
  id        String   @id @default(cuid())
  at        DateTime @default(now())
  mood      Int                   // ä¾‹: ğŸ˜„=5, ğŸ™‚=4, ğŸ˜=3, ğŸ˜•=2, ğŸ˜=1ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã§ãƒãƒƒãƒ”ãƒ³ã‚°ï¼‰
  note      String?
  createdAt DateTime @default(now())

  @@index([at])
  @@index([createdAt])
}

/**
 * ã‚¿ã‚¹ã‚¯ã”ã¨ã®å„ªå…ˆåº¦ã‚¹ã‚³ã‚¢ï¼ˆå½“æ—¥ã‚„çŠ¶æ³ã«å¿œã˜ã¦è¨ˆç®—ï¼‰ã€‚
 * ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ã€Œä»Šæ—¥ã®ãŠã™ã™ã‚ã€ã‚’ä½œã‚‹ãŸã‚ã®è£œåŠ©ã€‚
 */
model PriorityScore {
  id        String   @id @default(cuid())
  date      DateTime
  taskId    String
  score     Float
  reason    String?
  createdAt DateTime @default(now())

  task Task @relation(fields: [taskId], references: [id])

  @@index([date])
  @@index([taskId, date])
}
